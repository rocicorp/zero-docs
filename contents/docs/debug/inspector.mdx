---
title: Inspector API
---

The Zero instance provides an API to explore the client's current state, including information such as:

- All active queries
- Query TTLs
- Active clients
- Client database contents

This can help figuring out why you hit loading states, how many queries are active at a time, if you have any resource leaks due to failing to clean up queries or if expected data is missing on the client.

## Accessing the Inspector

Use the `inspector` field of your `Zero` instance:

```ts
console.log(__zero.inspector.clientID);
```

For convenience, the active `Zero` instance is automatically exposed at `__zero` in every Zero app.

<Note type="note" slug="Password required in production">
  To protect the inspector from being accessed by unauthorized users, the
  [`ZERO_ADMIN_PASSWORD`](/docs/zero-cache-config#admin-password) config variable must be set in
  production.
</Note>

## Clients and Groups

Once you have an inspector you can inspect the current client and client group.

<Note heading="Clients and Client Groups">
  The client group represents a web browser profile. A client represents an
  instance of `Zero` within that profile. If a user has Chrome open with 5
  different tabs, each with one `Zero` instance, there will be 1 client group
  and 5 clients.
</Note>

For example to see active queries for the current client:

```ts
console.table(await inspector.client.queries());
```

To inspect other clients within the group:

```ts
const allClients = await inspector.clients();
```

## Query Metrics

The inspector tracks a number of per-query metrics:

```ts
const queries = await inspector.client.queries();
const slowQuery = queries[0];

// Median server materialization time for this query.
console.log(
  slowQuery.metrics['query-materialization-server']
  .quantile(0.5)
);

// 95th percentile client materialization time for this query.
console.log(
  slowQuery.metrics['query-materialization-client']
  .quantile(0.95)
);
```

You can list all the available metrics like so:

```ts
const queries = await inspector.client.queries();
const slowQuery = queries[0];
console.log(Object.keys(slowQuery.metrics));
```

## Dumping Data

In addition to information about queries, you can see the contents of the client side database.

```ts
const inspector = await zero.inspect();
const client = inspector.client;

// All raw k/v data currently synced to client
console.log('client map:');
console.log(await client.map());

// kv table extracted into tables
// This is same info that is in z.query[tableName].run()
for (const tableName of Object.keys(schema.tables)) {
  console.log(`table ${tableName}:`);
  console.table(await client.rows(tableName));
}
```

## Server Version

Ask the server to confirm what version it is:

```ts
console.log('server version: ', await inspector.serverVersion());
```